<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Калькулятор ЗП старшего эксперта</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="logo-slot">
        <!-- Сюда можешь добавить логотип, например /img/logo.png -->
        Логотип
      </div>
      <div class="app-header-main">
        <h1>Калькулятор ЗП старшего эксперта</h1>
        <p class="subtitle">Подсчёт премии, план и календарь продаж</p>
      </div>
      <div class="app-header-actions">
        <button id="edit-prices-btn" class="btn ghost">Редактировать цены</button>
        <button id="edit-plan-btn" class="btn ghost">План</button>
        <button id="reset-data-btn" class="btn danger">Сбросить данные</button>
      </div>
    </header>

    <nav class="tab-bar">
      <button class="tab-btn active" data-tab="calc">Подсчёт</button>
      <button class="tab-btn" data-tab="calendar">Календарь</button>
      <button class="tab-btn" data-tab="deals">Мои сделки</button>
    </nav>

    <main class="tab-panels">
      <!-- Вкладка Подсчёт -->
      <section id="tab-calc" class="tab-panel active">
        <div class="summary-grid">
          <div class="card">
            <h2>Оклад и режим</h2>
            <div class="field-group">
              <label class="field-label" for="salary-input">Оклад, ₽</label>
              <input id="salary-input" type="number" min="0" step="1000" class="field-input" />
            </div>

            <label class="switch-row">
              <span>Сервисный сотрудник (+500 ₽ за рабочий день)</span>
              <label class="switch">
                <input type="checkbox" id="service-worker-toggle" />
                <span class="slider"></span>
              </label>
            </label>
          </div>

          <div class="card">
            <h2>Итоги месяца</h2>

            <div class="stat-row">
              <span>Заработок по полкам</span>
              <strong id="earn-total">0 ₽</strong>
            </div>

            <div class="stat-row">
              <span>Сервисный бонус</span>
              <strong id="earn-service">0 ₽</strong>
            </div>

            <div class="stat-row">
              <span>Коэффициент</span>
              <strong id="coef-value">0.0</strong>
            </div>

            <div class="divider"></div>

            <div class="stat-row">
              <span>Премия (до вычета)</span>
              <strong id="bonus-gross">0 ₽</strong>
            </div>

            <div class="stat-row">
              <span>Премия «на руки»</span>
              <strong id="bonus-net">0 ₽</strong>
            </div>

            <div class="stat-row">
              <span>Оклад + премия «на руки»</span>
              <strong id="total-with-salary">0 ₽</strong>
            </div>
          </div>
        </div>

        <div class="layout-two">
          <section class="card">
            <h2>Полки и продукты</h2>
            <div id="shelves-info-container" class="shelves-info"></div>
          </section>

          <section class="card">
            <h2>Выполнение плана по полкам</h2>
            <div id="plan-progress-container" class="plan-progress-container"></div>
          </section>
        </div>
      </section>

      <!-- Вкладка Календарь -->
      <section id="tab-calendar" class="tab-panel">
        <div class="card">
          <div class="calendar-header">
            <div class="calendar-nav">
              <button id="prev-month-btn" class="icon-btn">&larr;</button>
              <button id="today-month-btn" class="btn ghost small">Текущий месяц</button>
              <button id="next-month-btn" class="icon-btn">&rarr;</button>
            </div>
            <div class="calendar-title" id="calendar-month-label">Месяц Год</div>
          </div>

          <div class="calendar-grid-header">
            <span>Пн</span>
            <span>Вт</span>
            <span>Ср</span>
            <span>Чт</span>
            <span>Пт</span>
            <span>Сб</span>
            <span>Вс</span>
          </div>

          <div id="calendar-grid" class="calendar-grid"></div>
        </div>

        <div class="card">
          <h2>График продаж по будним дням</h2>
          <canvas id="sales-chart" width="980" height="260"></canvas>
        </div>
      </section>

      <!-- Вкладка Мои сделки -->
      <section id="tab-deals" class="tab-panel">
        <div class="card">
          <div class="deals-header">
            <h2>Мои сделки за месяц</h2>
            <select id="deals-shelf-filter" class="field-input">
              <option value="all">Все полки</option>
            </select>
          </div>

          <div id="deals-list" class="deals-list"></div>
        </div>
      </section>
    </main>

    <!-- Модалка дня -->
    <div id="day-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <header class="modal-header">
          <h2 id="day-modal-title">Продажи за день</h2>
          <button class="icon-btn" data-close-modal="day-modal">✕</button>
        </header>
        <div class="modal-body">
          <div class="day-modal-top">
            <div class="stat-row">
              <span>Итого за день</span>
              <strong id="day-total-amount">0 ₽</strong>
            </div>
            <label class="switch-row">
              <span>Выходной день</span>
              <label class="switch">
                <input type="checkbox" id="day-weekend-toggle" />
                <span class="slider"></span>
              </label>
            </label>
          </div>

          <section class="day-sales-section">
            <h3>Сделки за день</h3>
            <div id="day-sales-list" class="day-sales-list"></div>
          </section>

          <section class="day-form-section">
            <h3>Добавить / изменить продажу</h3>
            <form id="day-sale-form" class="form-grid">
              <div class="field-group">
                <label class="field-label" for="sale-shelf-select">Полка</label>
                <select id="sale-shelf-select" class="field-input">
                  <option value="">Выберите полку</option>
                </select>
              </div>

              <div id="sale-product-wrapper" class="field-group hidden">
                <label class="field-label" for="sale-product-select">Продукт</label>
                <select id="sale-product-select" class="field-input"></select>
              </div>

              <div id="sale-insurance-sum-wrapper" class="field-group hidden">
                <label class="field-label" for="sale-insurance-sum">Сумма страховки, ₽</label>
                <input id="sale-insurance-sum" type="number" min="0" step="1000" class="field-input" />
              </div>

              <div class="field-group full">
                <label class="field-label" for="sale-comment">Комментарий</label>
                <textarea id="sale-comment" rows="2" class="field-input"></textarea>
              </div>

              <input type="hidden" id="sale-edit-id" />

              <div class="form-actions full">
                <button type="submit" class="btn primary">Сохранить</button>
                <button type="button" id="day-sale-cancel-edit-btn" class="btn ghost">Очистить форму</button>
              </div>
            </form>
          </section>
        </div>
      </div>
    </div>

    <!-- Модалка редактирования цен -->
    <div id="prices-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog modal-wide">
        <header class="modal-header">
          <h2>Редактирование цен продуктов</h2>
          <button class="icon-btn" data-close-modal="prices-modal">✕</button>
        </header>
        <div class="modal-body" id="prices-modal-body"></div>
        <footer class="modal-footer">
          <button class="btn primary" id="prices-save-btn">Сохранить</button>
        </footer>
      </div>
    </div>

    <!-- Модалка плана -->
    <div id="plan-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <header class="modal-header">
          <h2>План по полкам</h2>
          <button class="icon-btn" data-close-modal="plan-modal">✕</button>
        </header>
        <div class="modal-body" id="plan-modal-body"></div>
        <footer class="modal-footer">
          <button class="btn primary" id="plan-save-btn">Сохранить план</button>
        </footer>
      </div>
    </div>

    <!-- Модалка деталей сделки -->
    <div id="deal-details-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <header class="modal-header">
          <h2>Детали сделки</h2>
          <button class="icon-btn" data-close-modal="deal-details-modal">✕</button>
        </header>
        <div class="modal-body" id="deal-details-body"></div>
        <footer class="modal-footer">
          <button class="btn ghost" id="deal-details-edit-btn">Изменить</button>
          <button class="btn danger" id="deal-details-delete-btn">Удалить</button>
        </footer>
      </div>
    </div>

    <!-- Модалка подтверждения удаления -->
    <div id="confirm-modal" class="modal hidden" aria-hidden="true">
      <div class="modal-backdrop"></div>
      <div class="modal-dialog">
        <header class="modal-header">
          <h2>Удалить продажу?</h2>
        </header>
        <div class="modal-body">
          <p>Вы точно хотите удалить эту продажу?</p>
        </div>
        <footer class="modal-footer">
          <button class="btn danger" id="confirm-yes-btn">Да</button>
          <button class="btn ghost" id="confirm-no-btn">Нет</button>
        </footer>
      </div>
    </div>

    <!-- Тосты -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Скрипт логики -->
    <script src="scrypt.js"></script>
  </div>
</body>
</html>

