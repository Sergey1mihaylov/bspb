<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Калькулятор зарплаты старшего эксперта</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="logo-placeholder">Логотип</div>
  <nav>
    <button id="tab-calc" class="tab-btn active" aria-controls="calc" aria-selected="true">Подсчет</button>
    <button id="tab-calendar" class="tab-btn" aria-controls="calendar" aria-selected="false">Календарь</button>
    <button id="tab-deals" class="tab-btn" aria-controls="deals" aria-selected="false">Мои сделки</button>
    <button id="tab-calls" class="tab-btn" aria-controls="calls" aria-selected="false">Звонки</button>
  </nav>
</header>

<main>
  <section id="calc" class="tab-content active" role="tabpanel" aria-labelledby="tab-calc">
    <div class="input-group">
      <label for="salary-input">Оклад (₽):</label>
      <input type="number" id="salary-input" min="0" value="0" />
    </div>
    <div class="input-group service-group">
      <input type="checkbox" id="service-mode" />
      <label for="service-mode">Сервисный сотрудник (+500 ₽ в каждый рабочий день)</label>
    </div>
    <div class="btn-group">
      <button id="edit-plan-btn" class="btn">Редактировать план</button>
      <button id="edit-prices-btn" class="btn">Редактировать цены</button>
    </div>

    <!-- Модалки -->
    <div id="plan-editor" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h2>Редактировать план</h2>
        <div id="plan-edit-container"></div>
        <div class="modal-actions">
          <button id="save-plan-btn" class="btn btn-primary">Сохранить</button>
          <button id="cancel-plan-btn" class="btn btn-secondary">Отмена</button>
        </div>
      </div>
    </div>

    <div id="prices-editor" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h2>Редактировать цены</h2>
        <div id="prices-edit-container"></div>
        <div class="modal-actions">
          <button id="save-prices-btn" class="btn btn-primary">Сохранить</button>
          <button id="cancel-prices-btn" class="btn btn-secondary">Отмена</button>
        </div>
      </div>
    </div>

    <div class="results">
      <div><strong>Коэффициент:</strong> <span id="coef-span">0.00</span></div>
      <div><strong>Премия:</strong> <span id="premium-span">0 ₽</span></div>
      <div><strong>Премия на руки (−13% НДФЛ):</strong> <span id="net-span">0 ₽</span></div>
      <div><strong>Общий заработок (сумма продаж):</strong> <span id="total-earnings-span">0 ₽</span></div>
    </div>

    <h3>Прогресс по полкам</h3>
    <div id="progress-container" class="progress-list"></div>
  </section>

  <section id="calendar" class="tab-content" role="tabpanel" aria-labelledby="tab-calendar" tabindex="0">
    <div class="month-nav">
      <button id="prev-month" aria-label="Предыдущий месяц">‹</button>
      <h2 id="current-month-year"></h2>
      <button id="next-month" aria-label="Следующий месяц">›</button>
    </div>
    <div class="weekdays">
      <div>Пн</div><div>Вт</div><div>Ср</div><div>Чт</div><div>Пт</div><div>Сб</div><div>Вс</div>
    </div>
    <div id="calendar-grid" class="calendar-grid"></div>
    <!-- Модалка для добавления продаж -->
    <div id="day-sales-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h3 id="day-sales-title">Продажи за день</h3>
        <div id="sales-list"></div>
        <button id="add-sale-btn" class="btn btn-primary">Добавить продажу</button>
        <button id="close-day-modal-btn" class="btn btn-secondary">Закрыть</button>
      </div>
    </div>

    <div id="add-sale-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h3>Добавить продажу</h3>
        <form id="add-sale-form">
          <label for="sale-shelf">Полка:</label>
          <select id="sale-shelf" required></select>
          <label for="sale-product">Продукт:</label>
          <select id="sale-product" required></select>
          <label for="sale-amount">Сумма (₽):</label>
          <input type="number" id="sale-amount" min="0" required />
          <label for="sale-comment">Комментарий:</label>
          <input type="text" id="sale-comment" maxlength="100" />
          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <button type="button" id="cancel-add-sale-btn" class="btn btn-secondary">Отмена</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <section id="deals" class="tab-content" role="tabpanel" aria-labelledby="tab-deals" tabindex="0">
    <h2>Мои сделки</h2>
    <div class="filter-group">
      <label for="filter-shelf">Фильтр по полке:</label>
      <select id="filter-shelf">
        <option value="">Все</option>
      </select>
    </div>
    <ul id="deals-list" class="deals-list"></ul>
  </section>

  <section id="calls" class="tab-content" role="tabpanel" aria-labelledby="tab-calls" tabindex="0">
    <h2>Звонки</h2>
    <button id="add-call-btn" class="btn btn-primary">Добавить звонок</button>
    <ul id="calls-list" class="calls-list"></ul>

    <!-- Модалка добавления звонка -->
    <div id="add-call-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="modal-content">
        <h3>Добавить звонок</h3>
        <form id="add-call-form">
          <label for="call-fio">ФИО клиента:</label>
          <input type="text" id="call-fio" required maxlength="100" />
          <label for="call-phone">Номер телефона:</label>
          <input type="tel" id="call-phone" placeholder="+7(___)-___-__-__" required pattern="\+7\(\d{3}\)-\d{3}-\d{2}-\d{2}" />
          <label for="call-result">Результат звонка:</label>
          <select id="call-result" required>
            <option value="">Выберите</option>
            <option value="positive">Положительный</option>
            <option value="negative">Отрицательный</option>
          </select>
          <div id="call-reason-container" class="hidden">
            <label for="call-reason">Причина отказа:</label>
            <select id="call-reason">
              <option value="">Выберите</option>
              <option value="no-answer">Недозвон</option>
              <option value="voicemail">Автоответчик</option>
              <option value="not-interesting">Не интересно</option>
              <option value="already-have">Уже есть</option>
              <option value="other">Другое</option>
            </select>
            <textarea id="call-reason-comment" class="hidden" placeholder="Введите комментарий..." maxlength="200"></textarea>
          </div>
          <div class="modal-actions">
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <button type="button" id="cancel-add-call-btn" class="btn btn-secondary">Отмена</button>
          </div>
        </form>
      </div>
    </div>
  </section>
</main>

<script src="app.js" defer></script>
</body>
</html>
